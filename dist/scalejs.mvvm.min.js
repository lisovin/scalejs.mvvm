!function(a){"function"==typeof define&&define.amd?define("scalejs.mvvm/classBindingProvider",["knockout","exports"],a):a(ko)}(function(a,b){var c=function(a,b){var c,d;if(!a)return a;c={};for(d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a));return c},d=function(a){return function(){return a}};a.version>="3.0.0"&&!function(){var b=document.createElement("div");a.applyBindings(null,b);var c=a.contextFor(b),d=!a.storedBindingContextForNode,e=d?"A":"_subscribable",f=d?"wb":"_addNode",g=function(){};g[f]=g,c.constructor.prototype[e]=g,a.cleanNode(b)}();var e=function(b,e){var f=new a.bindingProvider;e=e||{},this.attribute=e.attribute||"data-class",this.virtualAttribute="ko "+(e.virtualAttribute||"class")+":",this.fallback=e.fallback,this.bindings=b||{},this.bindingRouter=e.bindingRouter||function(a,b){var c,d,e,f;if(b[a])return b[a];for(e=a.split("."),f=b,c=0,d=e.length;d>c;c++)f=f[e[c]];return f},this.registerBindings=function(b){a.utils.extend(this.bindings,b)},this.nodeHasBindings=function(a){var b,c;return 1===a.nodeType?b=a.getAttribute(this.attribute):8===a.nodeType&&(c=""+a.nodeValue||a.text,b=c.indexOf(this.virtualAttribute)>-1),!b&&this.fallback&&(b=f.nodeHasBindings(a)),b},this.getBindingsFunction=function(b){return function(g,h){var i,j,k,l,m,n,o={},p="";if(1===g.nodeType?p=g.getAttribute(this.attribute):8===g.nodeType&&(m=""+g.nodeValue||g.text,n=m.indexOf(this.virtualAttribute),n>-1&&(p=m.substring(n+this.virtualAttribute.length))),p)for(p=p.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"").replace(/(\s|\u00A0){2,}/g," ").split(" "),i=0,j=p.length;j>i;i++)k=this.bindingRouter(p[i],this.bindings),k?(l="function"==typeof k?k.call(h.$data,h,p):k,b&&(l=c(l,d)),a.utils.extend(o,l)):e.log&&e.log('No binding function provided for data class "'+p[i]+'" in element ',g,"\nMake sure data class is spelled correctly and that it's binding function is registered.");else this.fallback&&(o=f[b?"getBindingAccessors":"getBindings"](g,h));if(e.log)for(bindingName in o)o.hasOwnProperty(bindingName)&&"_ko_property_writers"!==bindingName&&"valueUpdate"!==bindingName&&"optionsText"!==bindingName&&!a.bindingHandlers[bindingName]&&(l?e.log('Unknown binding handler "'+bindingName+'" found in element',g,' defined in data-class "'+p+'" as',l,"\nMake sure that binding handler's name is spelled correctly and that it's properly registered. \nThe binding will be ignored."):e.log('Unknown binding handler "'+bindingName+'" in',g,"\nMake sure that it's name spelled correctly and that it's properly registered. \nThe binding will be ignored."));return o}},this.getBindings=this.getBindingsFunction(!1),this.getBindingAccessors=this.getBindingsFunction(!0)};return b||(a.classBindingProvider=e),e}),define("scalejs.mvvm/htmlTemplateSource",["knockout","scalejs!core"],function(a,b){function c(a){var b=document.createElement("div");b.innerHTML=a,e(b.childNodes).forEach(function(a){1===a.nodeType&&f(a,"id")&&(h[a.id]=a.innerHTML)})}function d(a){function b(b,c){return f(h.data,a)||(h.data[a]={}),1===arguments.length?h.data[a][b]:void(h.data[a][b]=c)}function c(b){if(0===arguments.length)return h[a];throw new Error('An attempt to override template "'+a+'" with content "'+b+'" Template overriding is not supported.')}return{data:b,text:c}}var e=b.array.toArray,f=b.object.has,g=new a.nativeTemplateEngine,h={data:{}};return g.makeTemplateSource=d,a.setTemplateEngine(g),{registerTemplates:c}}),define("scalejs.mvvm/selectableArray",["knockout","scalejs!core"],function(a,b){var c=a.isObservable,d=a.utils.unwrapObservable,e=a.observable,f=a.computed,g=b.object.has,h=b.array;return function(a,b){function i(a){if(!c(a.isSelected)||g(b.isSelectedPath)&&"isSelected"!==b.isSelectedPath){if(c(a.isSelected))throw new Error('item has observable `isSelected` property but `isSelectedPath` specified as "'+b.isSelectedPath+"\". `selectable` uses `isSelected` property of an item to determine whether it's selected. Either don't specify `isSelectedPath` or rename `isSelected` property to something else.");if(a.hasOwnProperty("isSelected"))throw new Error("item has non-observable `isSelected` property. `selectable` uses `isSelected` property of an item to determine whether it's selected. Either make `isSelected` observable or rename it.");if(a.isSelected=e(),g(b.isSelectedPath)&&"isSelected"!==b.isSelectedPath&&!c(a[b.isSelectedPath]))throw new Error("item's property \""+b.isSelectedPath+"\" specified by `isSelectedPath`  isn't observable. Either make it observable or specify different property in  `isSelectedPath`");g(b.isSelectedPath)&&(a.isSelected=a[b.isSelectedPath]),a.isSelected.subscribe(function(b){b?k(a):k()===a&&k(void 0)})}}b=b||{};var j,k=b.selectedItem||e(),l=b.selectionPolicy||"single";return c(a)?j=f(function(){var b=d(a);return b.forEach(i),h.copy(b)}):(a.forEach(i),j=h.copy(a)),k.subscribe(function(a){d(j).forEach(function(b){b.isSelected(b===a)}),"deselect"===l&&a&&setTimeout(function(){k(void 0)},0)}),j.selectedItem=k,j}}),define("scalejs.mvvm/ko.utils",["scalejs!core","knockout"],function(a,b){function c(c,d){return a.array.toArray(c).map(function(a){var c=a.cloneNode(!0);return d?b.cleanNode(c):c})}return{cloneNodes:c}}),define("scalejs.mvvm/mvvm",["knockout","knockout.mapping","scalejs!core","scalejs.mvvm/classBindingProvider","./htmlTemplateSource","./selectableArray","./ko.utils"],function(a,b,c,d,e,f,g){function h(b){return a.observable(b)}function i(b){return a.observableArray(b)}function j(b){return a.computed(b)}function k(a){return b.toJSON(a)}function l(a){return JSON.parse(k(a))}function m(){u(arguments).forEach(v.registerBindings.bind(v))}function n(a,c,d){var e=Object.keys(d).reduce(function(a,b){return t(a,{k:b,create:function(a){return d[b](a.data)}})},{});return b.fromJS(a,e,c)}function o(){u(arguments).forEach(e.registerTemplates)}function p(a,b){var c={};return c[a]=b,c}function q(a,b){return p("template",{name:a,data:b})}function r(a,b){return{dataClass:a,viewmodel:b}}function s(){var b=document.getElementsByTagName("body")[0];b.innerHTML="<!-- ko class: scalejs-shell --><!-- /ko -->",m({"scalejs-shell":function(a){return{render:a.$data.root}}}),a.applyBindings({root:w})}var t=c.object.merge,u=c.array.toArray,v=new d({},{log:c.log.warn,fallback:!0}),w=a.observable();return a.bindingProvider.instance=v,{core:{mvvm:{toJson:k,registerBindings:m,registerTemplates:o,dataClass:r,template:q,dataBinding:p,selectableArray:f,ko:{utils:g}}},sandbox:{mvvm:{observable:h,observableArray:i,computed:j,registerBindings:m,registerTemplates:o,toJson:k,toViewModel:n,toObject:l,dataClass:r,template:q,dataBinding:p,selectableArray:f,root:w}},init:s}}),define("scalejs.bindings/change",["knockout","scalejs!core"],function(a,b){function c(b,c,f,g){function h(a,c){return function(d){d!==c&&(c=d,a.call(g,d,b))}}function i(c,d){a.computed({read:function(){var a=m(g[c]);d(a)},disposeWhenNodeIsRemoved:b})}if(e(g)){var j,k,l,m=a.utils.unwrapObservable,n=c(),o=m(n);for(j in o)o.hasOwnProperty(j)&&(k=o[j],d(k.initial,"function")&&k.initial.apply(g,[m(g[j]),b]),d(k.update,"function")&&(l=h(k.update,m(g[j]))),d(k,"function")&&(l=h(k,m(g[j]))),l&&i(j,l))}}var d=b.type.is,e=b.object.has;return{init:c}}),define("scalejs.bindings/render",["scalejs!core","knockout","scalejs.functional"],function(a,b){function c(){return{controlsDescendantBindings:!0}}function d(a,c,d,j,k){function l(c){n?b.applyBindingsToNode(a,n,j):b.utils.emptyDomNode(a),window.requestAnimationFrame(c)}var m,n,o,p,q,r=g(c()),s=[],t=[];if(o=b.utils.domData.get(a,"binding"),r)if(e(r.dataClass,"string")){if(m=b.bindingProvider.instance.bindingRouter(r.dataClass),!m)throw new Error("Don't know how to render binding \""+r.dataClass+'" - no such binding registered. Either register the bindng or correct its name.');m&&(n=e(m,"function")?m.call(r.viewmodel||j,k):m)}else n=e(r,"function")?r.call(j,k):r;f(o,"transitions","outTransitions")&&(t=o.transitions.outTransitions.map(function(a){return i(a)})),f(n,"transitions","inTransitions")&&(s=n.transitions.inTransitions.map(function(a){return i(a)})),q=h.apply(null,t.concat(i(l)).concat(s)),p={getElement:function(){return a}},q.call(p),b.utils.domData.set(a,"binding",n)}var e=a.type.is,f=a.object.has,g=b.utils.unwrapObservable,h=a.functional.builders.continuation,i=a.functional.builder.$DO;return{init:c,update:d}}),define("scalejs.mvvm",["scalejs!core","knockout","scalejs.mvvm/mvvm","./scalejs.bindings/change","./scalejs.bindings/render"],function(a,b,c,d,e){b.bindingHandlers.change=d,b.bindingHandlers.render=e,b.virtualElements.allowedBindings.change=!0,b.virtualElements.allowedBindings.render=!0,c.init(),a.registerExtension(c)});